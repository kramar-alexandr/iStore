/* Haukr1.hal */external inner function string 60 UserDefined(string,string);external inner function Boolean CheckOffLineRecords(Boolean);external inner function Boolean TouchScreenLook();external inner function string 60 TileUserDefined(string,Integer,var Integer);function boolean CheckMyStok()begin record StockMovVc SMr;  record LocalMachineBlock LMb;  integer wn;  boolean res;    res = false;  wn = curwindow;  getWindowRecord(wn,SMr);  blockload(LMb);  if ((SMr.ToLocation == LMb.DefLocation) or (SMr.FrLocation == LMb.DefLocation) or (blank(SMr.FrLocation))) then begin   res = true;  end;  CheckMyStok = res;return;end;event DefineWindowsbegin  real h,h1,hl,h2,h3,h4,h5,h6,h7,hs,v,vm,l,vs,f,v2,t;  string 255 label;  integer flagtr;     SetLangMode(LangUkrainian,"UKR",0);    WindowBegin("Переміщення товарів",StockMovDClass,CGview,-);  SetWRect(20,80,640,400);  BrowseButtons(false);  Sizeable(-1,-1,0,0);  DynamicWindow;  UseView(StockMovVc);  if(CheckMyStok) then begin    ActiveFieldOnNew("SentTransDate");          v = 6; vs = 20; h = 110; h2 = 300; h3 = 500; h4 = 620;    EditField(h,v,80, "Номер",Normal,SerNr,false,TSerSClass);    EditField(h,v+=vs,80,"Дата замовлення",Normal,OrdTransDate,false,PasteCurDate);    EditField(h2,v,80,"Дата відправлення",Normal,SentTransDate,false,PasteCurDate);    EditField(h3,v,80,"Дата отримання",Normal,TransDate,false,PasteCurDate);    EditField(h,v+=vs,80, "Зі складу",Normal,FrLocation,false,LocationSClass);    EditField(h2,v,80,"через",Normal,ThrouLocation,false,LocationSClass);    EditField(h3,v,80,"на склад",Normal,ToLocation,false,LocationSClass);     EnterSkip(Math);    v = 24;    MatrixBegin(4,100,-50,-56,-,99);      Flip(0);    MatCol(1,24,"Товар",0,ArtCode,false,INSClass);            MatCol(1,180,"Серійний №",0,SerialNr,false,SerialNrSClass);    MatCol(1,290,"Зам. к-ть",0,OrdQuant,true,MATVARINSClass);    MatCol(1,310,"Отрим. к-ть",0,Quant,true,0);       MatCol(1,350,"Опис",0,Spec,false,0);        DeleteRowTest;    EndMatrix;    vs = 20;      CheckBox(20,-52,0,"Підтверджено",OrdFlag);    CheckBox(20,-36,0,"Відправлено",SentOKFlag);    CheckBox(20,-20,0,"Отримано",OKFlag);    EditField(170,-20,62,"Відправлено",Normal,TotSentQty,true,0);    EditField(310,-20,62,"Отримано",Normal,TotQty,true,0);    EditField(550,-20,100,"Неврах. накладні витрати",Normal,OtherExtraCosts,false,0);    SpecialMenu("Перевірити серійні номери",'',1,"StockMovFileCheckDsm");  end else begin  StaticText(100,120,"Ви можете переглядати тільки переміщення на свій склад",false);  end;  EndWindow;WindowBegin("Переміщення товарів: перевірка",CheckStockMovDClass,CGview,-);  SetWRect(20,80,640,400);    BrowseButtons(false);  Sizeable(-1,-1,0,0);  UseView(StockMovVc);    v = 24;  MatrixBegin(4,v,-50,-56,-,99);    Flip(0);  MatCol(1,24,"Товар",0,ArtCode,false,INSClass);  //Flip(1);      MatCol(1,180,"Серійний №",0,SerialNr,false,SerialNrSClass);  MatCol(1,320,"Отримано",0,SentQuant,true,0);   MatCol(1,380,"Опис",0,Spec,false,0);  EndMatrix;    EndWindow;  return;end;